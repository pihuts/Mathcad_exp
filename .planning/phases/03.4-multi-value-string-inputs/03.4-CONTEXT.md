# Phase 3.4: Multi-Value String Inputs - Context

**Gathered:** 2026-01-28
**Status:** Ready for planning

<domain>
## Phase Boundary

Enable string inputs to accept multiple values (List, CSV) for batch operations, bringing string inputs to feature parity with numeric inputs. Engineers can test multiple material names, configuration labels, or file references in a single batch run.

**In scope:** Enhancing existing string input UI (Phase 3.3) to support multiple values via textarea and CSV columns.

**Out of scope:** String validation rules, formatting constraints, advanced string operations (these would be separate phases).

</domain>

<decisions>
## Implementation Decisions

### Input Entry Method
- **Primary pattern:** Textarea with line-separated values (one string per line)
- **UI integration:** Context-sensitive Single Value field - expands to multi-line textarea when user adds newline
- **Visual feedback:** Claude's Discretion - auto-expand height, counter badge, or other appropriate feedback
- **Discoverability:** Claude's Discretion - placeholder text, help icon, or both to indicate multi-value support

### Value Management
- **Duplicates:** Auto-deduplicate silently - if user enters same string twice, keep only one occurrence
- **Whitespace/empty lines:** Claude's Discretion - likely trim whitespace and skip empty lines for forgiving UX
- **Validation:** None - accept any string values without constraints or length limits
- **Persistence:** Claude's Discretion - choose between array format, newline-delimited string, or format matching

### Batch Preview Display
- **String display format:** Claude's Discretion - plain text, quotes, or type indicators
- **Cartesian product preview:** Same as current - show all combinations naturally, no special grouping
- **Iteration count display:** Show breakdown on hover/tooltip (e.g., "150 iterations ⓘ" → hover shows "3 materials × 5 lengths × 10 angles")
- **Long string handling:** Claude's Discretion - truncate with ellipsis, wrap text, or horizontal scroll

### CSV Integration
- **Type detection:** Auto-detect and label string columns (show "String" badge or indicator in UI)
- **Cartesian vs Zip:** User chooses per column - each string column can independently use Cartesian or Zip mode
- **CSV column mapping:** Claude's Discretion - type indicators in mapper, validation, or seamless auto-detection
- **Empty cell handling:** Claude's Discretion - skip row, pass empty string, or warn then skip

</decisions>

<specifics>
## Specific Ideas

- Context-sensitive field behavior: Single line = single value mode, multiple lines = multi-value mode. Field adapts naturally.
- Deduplication should be silent and automatic - users shouldn't need to worry about accidentally entering duplicates
- CSV string columns need clear Cartesian/Zip control since string lists can create large iteration counts when cross-multiplied

</specifics>

<deferred>
## Deferred Ideas

None - discussion stayed within phase scope

</deferred>

---

*Phase: 03.4-multi-value-string-inputs*
*Context gathered: 2026-01-28*
