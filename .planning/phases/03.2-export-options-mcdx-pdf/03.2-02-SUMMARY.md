---
phase: 3.2
plan: 2
subsystem: frontend-ui
tags: [react, typescript, mantine, ui, export-options]

# Dependency graph
requires:
  - phase: 3.2-01
    provides: Backend export options API (export_pdf, export_mcdx flags)
provides:
  - Frontend export checkboxes in Batch and Workflow tabs
  - User-selectable PDF and MCDX export formats
  - Visual result links with native file opening
  - ResultsList component for generated files display
affects: [user-experience, batch-ui, workflow-ui]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - Export options as checkboxes with default PDF enabled
    - ResultsList component pattern for file display
    - Native file opening via backend API

key-files:
  created:
    - frontend/src/components/ResultsList.tsx
    - frontend/src/components/BisayaStatus.tsx
  modified:
    - frontend/src/services/api.ts
    - frontend/src/App.tsx
    - frontend/src/components/BatchGrid.tsx

key-decisions:
  - "Default PDF export enabled, MCDX disabled (most users want PDF)"
  - "Export options as checkboxes not radio buttons (allow both formats)"
  - "ResultsList component shows newest files first for download-like UX"
  - "BatchGrid PdfRenderer uses native file opening via backend API"

patterns-established:
  - "Export options placement: adjacent to Run button for visibility"
  - "File link rendering: Badge component with openFile API integration"
  - "Status display: BisayaStatus component for visual batch state"

# Metrics
duration: 1min
completed: 2026-01-26
---

# Phase 3.2 Plan 2: Add Export Checkboxes to Batch and Workflow UI

**User-selectable PDF and MCDX export formats with visual result links and native file opening**

## Performance

- **Duration:** 1 min
- **Started:** 2026-01-26T23:05:23Z
- **Completed:** 2026-01-26T23:07:31Z
- **Tasks:** 3 (2 atomic commits)
- **Files modified:** 7

## Accomplishments
- Export format checkboxes added to both Batch and Workflow tabs
- PDF export enabled by default, MCDX optional
- ResultsList component displays generated files with one-click native opening
- BatchGrid shows clickable export links per row
- BisayaStatus component provides visual batch state feedback

## Task Commits

Each task was committed atomically:

1. **Task 1: Update api.ts** - `99948e9` (feat)
   - Added export_pdf and export_mcdx to BatchRequest and WorkflowConfig types
   - Added stage, mcdx, and generated_files fields to batch status types
   - Added openFile API function for native file viewing

2. **Tasks 2-3: Update App.tsx (Batch and Workflow)** - `ba141ed` (feat)
   - Added export state variables and checkboxes to Batch tab
   - Added export state variables and checkboxes to Workflow tab
   - Updated handleRun and handleRunWorkflow to pass export flags
   - Created ResultsList component for generated files display
   - Created BisayaStatus component for visual status
   - Updated BatchGrid PdfRenderer to use native file opening

## Files Created/Modified

**Created:**
- `frontend/src/components/ResultsList.tsx` - List of generated files with native open links
- `frontend/src/components/BisayaStatus.tsx` - Visual batch status indicator

**Modified:**
- `frontend/src/services/api.ts` - Added export fields to TypeScript interfaces
- `frontend/src/App.tsx` - Added export checkboxes and state to both tabs
- `frontend/src/components/BatchGrid.tsx` - Updated PdfRenderer for native file opening

## Decisions Made

1. **Default PDF Export Enabled**: Users typically want PDF output, so enable by default
2. **Checkboxes Not Radio Buttons**: Allow both PDF and MCDX export simultaneously
3. **Export Options Placement**: Adjacent to Run button for high visibility
4. **Native File Opening**: Use backend API to open files with system default app (bypasses browser security)
5. **Newest Files First**: ResultsList shows most recent files at top for download-like UX

## Deviations from Plan

None - plan executed exactly as written. Tasks 2 and 3 were committed together as they both modify App.tsx and share the same component additions.

## Issues Encountered

None - implementation was straightforward with existing API patterns.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

Frontend export UI complete. Users can now:
- Select PDF and/or MCDX export formats before running batch or workflow
- View generated files in ResultsList with one-click native opening
- Open individual result files from BatchGrid rows

Ready for Phase 3.2 Plan 3 (verification testing) or next feature phase.

---
*Phase: 3.2-export-options-mcdx-pdf*
*Plan: 2*
*Completed: 2026-01-26*
